#!/bin/bash


export PATH USERPATH ELLIPSIS
PATH="${USERPATH:="$(
    IFS=; shopt -s nullglob
    x=(~/[b]in/{*/,})
    echo -n "${x[*]/%?/:}"
    )${PATH}"}"
: ${ELLIPSIS:=~/.../self/}

# http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=649456#27
export NSS_SSL_CBC_RANDOM_IV=0


interactive=${-//[^i]}

[[ -x $(type -p git) && -f ~/.../config && -z ${UID/#${EUID}} ]] && (
    export GIT_DIR=~/...
    _0=$(git rev-parse HEAD) &&
        git pull --quiet &&
        _1=$(git rev-parse HEAD) &&
        [[ ${_0} != ${_1} ]]; _e=${?}
    [[ ${_e} -eq 0 && -n ${interactive} ]] &&
        git diff --stat ${_0}
    exit ${_e}
    ) &&
    exec ${BASH}

[[ -n ${interactive} && -f ${ELLIPSIS}data/profile/etc/bash/interactive ]] &&
    . ${ELLIPSIS}data/profile/etc/bash/interactive
