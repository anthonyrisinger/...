#!/bin/bash


export PATH="${HOME}/bin:$PATH"
export ELLIPSIS=~/.../self/
export ELLIPSIS_HOSTS+=" .sta.xtfx.net"


if [[ $- == *i* ]]; then
    #declare -x TMPDIR=${HOME}/tmp
    declare TMPDIR=${HOME}/tmp
    declare -x _TMPDIR=/tmp/user-${USER}/tmp

    ! [[ -d ${_TMPDIR} ]] &&
        (umask 0077; mkdir --parents ${_TMPDIR}) &&
        mkdir ${_TMPDIR}/{dl,misc}
    ! [[ $(readlink -f ${TMPDIR}) == ${_TMPDIR} ]] &&
        rm -f ${TMPDIR} &&
        ln -s ${_TMPDIR} ${TMPDIR}

    [[ -f ~/.../config && ${UID} == ${EUID} ]] &&
        ( declare -x GIT_DIR=${HOME}/...
          ref0=$(git rev-parse HEAD)
          git pull
          ref1=$(git rev-parse HEAD)
          [[ ${ref0} != ${ref1} ]] ) &&
        exec ${BASH}

    [[ -f ${ELLIPSIS}data/profile/etc/bash/interactive ]] &&
        . ${ELLIPSIS}data/profile/etc/bash/interactive
fi
