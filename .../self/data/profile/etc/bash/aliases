#!/bin/bash

alias l='ls -Flh'
alias ll='ls -Flha'
alias t='tree -h -I "*.venv|*.pyc|__pycache__|*.egg-info|node_modules|vendor|.git|go"'
alias tt='t -a'
alias tx='tmux new-session -ADs ${PWD##*/}'

# Used by aliases.
DIFF_WORD=color
DIFF_ALGO=histogram

# Allow user to switch on/off.
noworddiff () { worddiff no; }
worddiff () {
  case ${1:-y} in
    (y*)
      [[ -z ${DIFF_WORD/none} ]] &&
        DIFF_WORD="$DIFF_WORD__" &&
        unset DIFF_WORD__;;
    (n*)
      [[ -z $DIFF_WORD__ ]] &&
        DIFF_WORD__="$DIFF_WORD" &&
        DIFF_WORD=none;;
  esac
}

# Git aliases.
diffopts='--diff-algorithm=$DIFF_ALGO --word-diff=$DIFF_WORD'
alias diff="git diff --no-index $diffopts"
alias ga="git add"
alias gaa="git add --all"
alias gap="git add --patch"
alias gc="git commit"
alias gca="git commit --amend"
alias gcam="git commit --amend --message"
alias gcan="git commit --amend --no-edit"
alias gcc="git commit --all"
alias gcca="git commit --all --amend"
alias gccam="git commit --all --amend --message"
alias gccan="git commit --all --amend --no-edit"
alias gccm="git commit --all --message"
alias gcm="git commit --message"
alias gd="git diff $diffopts"
alias gdd="git diff --cached $diffopts"
alias gdds="git diff --cached --stat"
alias gds="git diff --stat"
alias gl="git log $diffopts"
alias glg="git log --graph $diffopts"
alias glgo="git log --graph --oneline $diffopts"
alias glp="git log --patch $diffopts"
alias gls="git log --stat"
alias gp="git push"
alias gp!="git push --force"
alias gs="git show $diffopts"
alias gss="git show --stat"
alias gt="git status"
alias gts="git status --short"

incognito () { cognito off; }
cognito () {
  case ${1:-on} in
    (on)  [[ -z $HISTFILE ]] && HISTFILE="$HISTFILE__" && unset HISTFILE__;;
    (off) [[ -z $HISTFILE__ ]] && HISTFILE__="$HISTFILE" && unset HISTFILE;;
  esac
}
